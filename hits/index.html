<!DOCTYPE html>

<!--
  Google HTML5 slide template

  Authors: Luke Mahé (code)
           Marcin Wichary (code and design)
           
           Dominic Mazzoni (browser compatibility)
           Charles Chen (ChromeVox support)
           John Arthorne (Eclipse template)

  URL: http://code.google.com/p/html5slides/
-->

<html>
  <head>
    <title>Eclipse SDK's Greatest Hits: The First Ten Years</title>

    <meta charset='utf-8'>
    <script
      src='http://eclipse.org/eclipse/presentation/html/slides.js'></script>
  <style>
    /* Your individual styles here, or just use inline styles if that's
       what you want. */
    
    
  </style>
  </head>
  

  <body style='display: none;'>

    <section class='slides layout-regular template-eclipse'>
      
      <!-- Your slides (<article>s) go here. Delete or comment out the
           slides below. -->
        
      
      <article id='splash' class='biglogo'>
      </article>

      <article id='title'>
        <h1>
          Eclipse SDK's Greatest Hits:
          <br>
          The First Ten Years
        </h1>
        <p>
          John Arthorne
          <br>
          March, 2012
        </p>
      </article>

      <article id="disclaimer">
        <h3>
          Disclaimer
        </h3>
        <ul>
          <li>
            This is a semi-random, subjective list
          </li>
          <li>
            Just some deep Eclipse implementation details that I think are cool, from my perspective
          </li>
          <li>
            This presentation contains code
          </li>
        </ul>
        <p>
          <img style='height: 300px;' src='images/warning.png'>
        </p>
        <div class='source'>
          Source: http://www.flickr.com/photos/cara_vsangel/
        </div>
      </article>

      <article id="overview">
        <h3>
          What we're going to look at
        </h3>
        <ul>
          <li>
            Workspace tree representation
          </li>
          <li>
            Incremental Java build
          </li>
          <li>
            RCP refactoring
          </li>
          <li>
            Command framework
          </li>
          <li>
            p2 resolver
          </li>
        </ul>
      </article>

      <!-- ************************************************************************ -->

      <article id="tree-intro">
        <h3>
          Workspace tree representation
        </h3>
        <q>
          It's ElementTree my dear Watson, ElementTree
        </q>
        <div class='author'>
          ElementTree.java, line 75
        </div>
      </article>

      <article id="tree-motivation">
        <h3>
          ElementTree motivation
        </h3>
        <ul>
          <li>
            Typical edit/compile/deploy cycle for a developer focuses on a small segment of a potentially very large code base
          </li>
          <li>
            Want to aggressively optimize for this common cycle: make performance cost proportional to the change, rather than to the size of the workspace
          </li>
          <li>
            Create and manipulate “units of change” that are passed around to interested parties
          </li>
        </ul>
      </article>
      
      <article id="tree-diag1">
        <h3>
          Data flow
        </h3>
        <p>
          <img style='height: 520px;' src='images/tree.png'>
        </p>
      </article>

      <article id="tree-motivation">
        <h3>
          Additional observations
        </h3>
        <ul>
          <li>Clients want a delta of the workspace state between two moments in time</li>
          <li>Different clients may want deltas with different start and/or end points</li>
          <li>May need to keep track of hundreds of tree states at once</li>
          <li>How to efficiently represent all these different deltas in memory?</li>
          <li>How to compute these deltas without traversing entire workspaces?</li>
        </ul>
      </article>

      <article id="tree-diag2">
        <h3>
          Representing two tree states
        </h3>
        <p>
          <img style='height: 520px;' src='images/tree2.png'>
        </p>
      </article>

      <article id="tree-diag3">
        <h3>
          Representing tree states as deltas
        </h3>
        <p>
          <img style='height: 520px;' src='images/tree3.png'>
        </p>
      </article>

      <article id="tree-details">
        <h3>
          More details
        </h3>
        <ul>
          <li>Have only one complete tree, and represent all others as deltas</li>
          <li>Only one delta is mutable - representing current operation</li>
          <li>Immutability allows trees to share common parent and nodes to share children</li>
          <li>Each tree seems complete when traversing using API, but internal structure quite different</li>
          <li>Computing deltas is nearly free for most common operations</li>
        </ul>
      </article>
      <article>
        <h3>
          Lessons learned
        </h3>
        <ul>
          <li>Not all optimization is a speed-space tradeoff. Here we greatly reduced space required to represent states, and made delta calculation very fast</li>
          <li>Textbook data structures work very well in most programming situations, but sometimes 
          a very specialized structure is called for</li>
          <li>Internal representation of a data structure can be radically different from external appearance</li>
        </ul>
      </article>

      <!-- ************************************************************************ -->

      <article id="builder-intro" class='smaller'>
        <h3>
          Incremental Java build
        </h3>
        <q>
          Conducts a trial on a single compilation unit. Returns true if the unit
          is guilty. The sentence is compilation without possibility of parole.
        </q>
        <div class='author'>
          IncrementalImageBuilder.java v_146, line 1570
        </div>
      </article>

      <!-- ************************************************************************ -->

      <article id="rcp-intro">
        <q>
          Performs arbitrary actions when the event loop crashes.
        </q>
        <div class='author'>
          WorkbenchAdvisor.java, line 297
        </div>
      </article>

      <!-- ************************************************************************ -->

      <article id="command-intro">
        <q>
          Okay. Have a seat. Relax a while. This is going to be a bumpy ride.
        </q>
        <div class='author'>
          WidgetMethodHandler.java, line 81
        </div>
      </article>

      <!-- ************************************************************************ -->

      <article id="p2-intro">
        <q>
          The fix is to avoid the workaround.
        </q>
        <div class='author'>
          Control.java (Motif), 4076
        </div>
      </article>
      
      <article id="p2-background">
        <h3>Background</h3>
        <ul>
          <li>Update manager only resolved dependencies at the feature level</li>
          <li>Features that were already installed would never be reconsidered when installing something else</li>
          <li>Resolving dependencies could sometimes be slow but was generally usable</li>
        </ul>
      </article>

      <article id="p2-observations">
        <h3>Observations</h3>
        <ul>
          <li>Observation: some installed things are "roots" that the user chose to install, 
            other things are installed only to satisfy dependencies	</li>
          <li>In p2 we wanted to ensure all dependencies were satisfied - feature, bundle, and package level</li>
          <li>This is an NP hard constraint satisfaction problem, and our hand-crafted resolver wasn't good enough</li>
        </ul>
      </article>

      <article>
        <ul>
          <li>Brief overview of boolean satisfaction problem</li>
          <li>Mapping install dependency satisfaction to boolean constraints (Projector)</li>
          <li>SAT4J - SAT competitions</li>
        </ul>
      </article>
      
      <article id="p2-lessons-learned">
        <h3>Lessons learned</h3>
        <ul>
          <li>Need to recognize when you have an NP hard problem</li>
          <li>These kinds of problems are big in the academic world and there is a lot of existing work available</li>
          <li>There are probably others who have solved this problem more efficiently</li>
          <li>Those things you learned in school about algorithm complexity and isomorphism sometimes come in handy!</li>
        </ul>
      </article>

      <article id="the-end">
        <h3>
          Thank you!
        </h3>
        
        <ul>
          <li>
            <a href='http://www.eclipse.org'>eclipse.org</a>
          </li>
        </ul>
      </article>

    </section>

  </body>
</html>
