<!DOCTYPE html>
<html>
  <head>
    <title>Orion Tutorial: Editor Services</title>

    <meta charset='utf-8'>
    <script
      src='http://eclipse.org/eclipse/presentation/html/slides.js'></script>
  </head>

  <body style='display: none;'>

    <section class='slides layout-regular template-eclipse'>

      <article>
        <h3>
          orion.edit.command
        </h3>
        <ul>
          <li>Registers a command that operates on the contents or selection in an editor</li>
          <li>Declares a single function: run(selectedText, text, selection)</li>
          <li>Returns a string to replace current selection, or an object describing new editor contents and selection</li>
        </ul>
        <pre>
provider.registerServiceProvider("orion.edit.command", {
   run : function(text) {
     return text.toUpperCase();
   }
 }, {
   name : "UPPERCASE", img : "/images/gear.gif", key : [ "u", true ]
});
 </pre>
      </article>

      <article>
        <h3>
          orion.edit.highlighter
        </h3>
        <ul>
          <li>Contributes syntax highlighting rules to the editor</li>
          <li>Declarative style: provide a grammar object</li>
          <li>Programmatic style: implement the highlighter algorithm entirely in the plugin</li>
        </ul>
        <pre>
provider.registerServiceProvider("orion.edit.highlighter", {},
    type : "grammar", contentType: ["text.markdown"],
    grammar: {
      patterns: [{
          //line starting with '#' is a heading
          "match": "^#.*$",
          "name": "entity.name.tag.doctype.html"
      }]
    }
}); </pre>
      </article>

      <article>
        <h3>
          orion.edit.contentAssist
        </h3>
        <ul>
          <li>Contributes content assist proposals</li>
          <li>Implements single method: computeProposals(prefix, buffer, selection)</li>
        </ul>
        <pre>
computeProposals: function(prefix, buffer, selection) {
  var proposals = [];
  if (prefix.length === 0) {
    proposals.push({
      proposal: "[Link Name](http:// \"Optional Title Here\")",
      escapePosition: selection.offset+19});
    }
  return proposals;
}
       </pre>
      </article>

      <article>
        <h3>
          orion.edit.outliner
        </h3>
        <ul>
          <li>Contributes outline for a document</li>
          <li>Implements single method: getOutline(contents, title) </li>
          <li>Returns a JSON representation of the document structure</li>
        </ul>
        <pre>
[{
  "label" : "Top Level",
  "line" : 1,
  "children" : [
    {"label" : "Child 1", "line" : 2},
    {"label" : "Child 2", "line" : 3}
  ]
}]
       </pre>
      </article>

      <article>
        <h3>
          orion.edit.validator
        </h3>
        <ul>
          <li>Calculates errors and warnings in a document</li>
          <li>Implements single method: checkSyntax(title, contents)</li>
          <li>Returns a JSON representation of errors and warnings</li>
        </ul>
        <pre>
{"problems" : [{
  "description" : "Broken link: [foo]",
  "line" : 1,
  "start" : 15,
  "end" : 20,
  "severity" : "error"
}]
       </pre>
      </article>

    </section>
  </body>
</html>
